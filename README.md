# risk-tools  
Common risk metrics


## dependencies

numpy


## API

### vol(returns) ->
r = rnand.uniform(-1, 1, 50)
m = nrand.uniform(-1, 1, 50)

print('vol=', vol(r))
print('beta=', beta(r, m))


### beta(returns, market) ->


### var(returns, alpha) ->
historical sim var takes t historical returns, orders them, and takes the loss at the point
in the list which corresponds to alpha

r = nrand.uniform(-1, 1, 50)
print('var(0.05) = ', var(r, 0.05))


### cvar(returns, alpha) ->
print('cvar(0.05) = ', cvar(r, 0.05))


### lower_partial_moment(returns, threshold, order) ->
measures of risk-adjusted return based on vol treat all deviations from the mean as risk

whereas measures of risk-adjusted return based on lower partial moments 
consider only deviations below some predefined minimum return threshold, t as risk
i.e. positive deviations aren't risky

r = nrand.uniform(-1,1,50)
print('hpm(0.0)_1 = ', hpm(r, 0.0, 1))
print('lpm(0.0)_1 = ', lpm(r, 0.0, 1))


### higher_partial_moment(returns, threshold, order) ->
r = nrand.uniform(-1,1,50)
print('hpm(0.0)_1 = ', hpm(r, 0.0, 1))
print('lpm(0.0)_1 = ', lpm(r, 0.0, 1))


### drawdown(returns, tau) ->
drawdown 
maximum decrease in the value of the portfolio over a specific period of time


### max_drawdown(returns) ->


### average_drawdown(returns, periods) ->


### average_drawdown_squared(returns, periods) ->


### treynor_ratio(er, returns, market, rf) ->
Treynor ratio - one of the first measures. 
metric for rating performance of investment funds. 
Treynor calculates the excess returns generated by a portfolio E(r) - rf
and discounts it by portfolio beta: (E(r) - rd )/ beta


### sharpe_ratio(er, returns, rf) ->
sharpe ratio - extension of Traynor - discounts expected excess returns by vol


### information_ratio(returns, benchmark) ->
information ratio is extension of Sharpe ratio - replaces risk-free rate of return with
the scalar expected return of a benchmark portfolio E(rb)


### modigliani_ratio(er, returns, benchmark, rf) ->
Modigliani ratio - combination of the Sharpe and info ratios
- adjusts the expected excess returns of the portfolio above the risk free rate by the 
expected excess returns of a benchmark portfolio, above the risk free rate


## measures of risk-adjusted return based on value at risk


### excess_var(er, returns, rf, alpha) ->
excess return on value at risk discounts the excess return of the portfolio above
the risk-free rate by the value at risk of the portfolio


### conditional_sharpe_ratio(er, returns, rf, alpha) ->
conditional sharpe ratio - discounts the excess return of the portfolio above the 
risk-free rate by the conditional VaR of the portfolio


### omega_ratio(er, returns, rf, target=0) ->
omega ratio discounts the excess returns of a portfolio above the target threshold
(usually risk-free rate), by the first-order lower partial moment of the returns.
first-order lower partial moment corresponds to the average expeceted loss aka
downside risk


### sortino_ratio(er, returns, rf, target=0) ->
sortino ratio 
modification of sharpe - only uses downside vol (delta)


### kappa_three_ratio(er, returns, rf, target=0) ->
kappa ratio - generalization of omega and sortino ratios
if j = 1, kappa is omega, j = 2, kappa is sortino


### gain_loss_ratio(returns, target=0) ->
discounts first order higher partial moment of a portfolio's returns,
upside potential, by the first-order lower partial moment of a portfolio's returns, 
downside risk


### upside_potential_ratio(returns, target=0) ->
discounts first order higher partial moment of a portfolio's returns, upside potential,
by the second-order lower partial moment of a portfolio's returns, downside variation


## drawdown risk based measures

### calmar_ratio(er, returns, rf) ->
discounts expected excess return of a portfolio by the 
worst expected maximum draw down for that portfolio


### sterling_ratio(er, returns, rf, periods) ->
discounts the expected excess return of a portfolio by the average of the N worst
expected maximum drawdowns for that portfolio


### burke_ratio(er, returns, rf, periods) ->
similar to sterling, but less sensitive to outliers
discounts the expected excess return of a portfolio by the square root of the average
of the N worst expected maximum drawdowns for that portfolio